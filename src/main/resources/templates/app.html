<!doctype html><html lang="en"><head>    <meta charset="utf-8"/>    <title>Skill/Project Tracker — MVP</title>    <meta name="viewport" content="width=device-width, initial-scale=1"/>    <style>        :root{          --bg-soft: #eef4ff;              /* very light blue background */          --bg-soft-2: #e2ecff;          --bg-card: #ffffff;              /* white cards */          --text-main: #1e293b;            /* slate text */          --text-muted: #64748b;           /* muted slate */          --border: rgba(148,163,184,.4);          --primary: #3b82f6;              /* blue-500 */          --primary-light: #93c5fd;        /* blue-300 */          --primary-soft: #dbeafe;         /* blue-100 */          --success: #16a34a;          --danger: #dc2626;        }        *{ box-sizing:border-box; }        body{          margin:0;          min-height:100vh;          color:var(--text-main);          background:            radial-gradient(800px 800px at 0% 0%, #dbeafe 0%, transparent 55%),            radial-gradient(900px 900px at 100% 0%, #e0f2fe 0%, transparent 55%),            linear-gradient(180deg, var(--bg-soft), var(--bg-soft-2));          font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Noto Sans";        }        .container{          max-width:1080px;          margin:0 auto;          padding:24px;        }        .header{          display:flex;          justify-content:space-between;          align-items:center;          margin-bottom:16px;        }        .brand{          display:flex;          align-items:center;          gap:14px;        }        .brand-logo{          height:40px;          width:40px;          border-radius:12px;          background: radial-gradient(circle at 30% 30%, #ffffff, #bfdbfe 45%, #60a5fa 75%);          box-shadow:0 4px 12px rgba(37,99,235,.4);          display:flex;          align-items:center;          justify-content:center;          font-weight:800;          color:#1d4ed8;          font-size:1.1rem;        }        h1{          margin:0;          font-weight:800;          letter-spacing:.2px;          font-size:1.4rem;        }        .subtitle{          margin-top:2px;          font-size:.95rem;          color:var(--text-muted);        }        /* Chip / user menu */        .chip{          position:relative;          display:inline-flex;          align-items:center;          gap:8px;          padding:8px 14px;          border-radius:999px;          border:1px solid var(--border);          background:rgba(255,255,255,.9);          color:var(--text-muted);          font-size:.95rem;          cursor:pointer;          box-shadow:0 4px 12px rgba(15,23,42,.08);        }        .chip strong{ color:var(--text-main); }        .chip svg{ opacity:.7; }        .menu{          position:absolute;          right:0;          top:115%;          background:white;          border-radius:12px;          border:1px solid var(--border);          min-width:180px;          padding:6px;          z-index:20;          box-shadow:0 12px 30px rgba(15,23,42,.1);        }        .menu button{          width:100%;          text-align:left;          background:transparent;          color:var(--text-main);          border:0;          padding:10px 12px;          border-radius:8px;          cursor:pointer;          font-size:.95rem;        }        .menu button:hover{          background:var(--primary-soft);        }        .hide{ display:none; }        /* Cards */        .card{          background:var(--bg-card);          border:1px solid var(--border);          border-radius:14px;          padding:20px;          box-shadow:0 4px 14px rgba(15,23,42,.08);        }        /* Grid layout */        .grid{          display:grid;          gap:20px;        }        .grid-2{ grid-template-columns:1fr 1fr; }        .grid-3{ grid-template-columns:repeat(3,1fr); }        @media (max-width:980px){          .grid-2,.grid-3{ grid-template-columns:1fr; }        }        /* Typography / labels / inputs */        label{          display:block;          margin-top:10px;          font-size:.95rem;          color:var(--text-main);        }        input, select, textarea{          width:100%;          margin-top:6px;          padding:12px 14px;          border-radius:10px;          border:1px solid var(--border);          background:#f9fbff;          font-size:1rem;          color:var(--text-main);          outline:none;        }        input:focus, select:focus, textarea:focus{          border-color:var(--primary-light);          box-shadow:0 0 0 1px var(--primary-light);        }        input[readonly]{          background:#eff3ff;          opacity:0.85;          cursor:not-allowed;        }        textarea{ resize:vertical; }        /* Buttons */        .btn-row{          display:flex;          gap:10px;          flex-wrap:wrap;          margin-top:14px;        }        .btn{          border:none;          border-radius:10px;          padding:12px 16px;          cursor:pointer;          color:white;          font-weight:600;          background:var(--primary);          box-shadow:0 4px 12px rgba(59,130,246,.35);          font-size:.95rem;        }        .btn:hover{          background:#2563eb;        }        .btn.ghost{          background:white;          color:var(--primary);          border:1px solid var(--primary-light);          box-shadow:none;        }        .btn.ghost:hover{          background:var(--primary-soft);        }        .btn.tab{          padding:10px 18px;          border-radius:999px;          background:var(--primary-soft);          color:#1d4ed8;        }        .btn.tab.active{          background:var(--primary);          color:white;        }        .status{          margin-top:10px;          font-size:.9rem;          color:var(--text-muted);        }        .status.ok{ color:var(--success); }        .status.err{ color:var(--danger); }        ul{          padding-left:18px;          margin:8px 0 0;        }        .muted{ color:var(--text-muted); }        /* Welcome line */        .welcome{          font-size:1rem;          color:#1d4ed8;          margin:0 0 10px;          opacity:0;          transform:translateY(-6px);          animation:welcome-slide .6s ease-out forwards;        }        @keyframes welcome-slide{          to{ opacity:1; transform:translateY(0); }        }        /* Stats */        .stat{          background:white;          padding:16px;          border-radius:12px;          border:1px solid var(--border);          box-shadow:0 2px 8px rgba(15,23,42,.06);        }        .stat .label{          color:var(--text-muted);          font-size:.9rem;        }        .stat .value{          font-size:1.6rem;          font-weight:700;        }        /* Skill modal overlay */        #skill-modal{          position:fixed;          inset:0;          background:rgba(15,23,42,.32);          display:flex;          align-items:center;          justify-content:center;          z-index:50;        }        /* Skill modal card override */        #skill-modal .card{          max-width:640px;          width:100%;          max-height:90vh;          overflow:auto;          position:relative;        }        /* Close button */        .modal-close-btn{          position:absolute;          top:10px;          right:12px;          border:none;          background:transparent;          color:var(--text-muted);          cursor:pointer;          font-size:1.1rem;        }        /* Links in suggestions */        a{          color:#2563eb;        }        a:hover{          text-decoration:underline;        }    </style>    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script></head><body><div class="container">    <div class="header">        <div class="brand">            <!-- Simple logo box (you can replace with <img src="/logo.png"> if you add a real logo file) -->            <div class="brand-logo">ST</div>            <div>                <h1>Skill/Project Tracker — MVP</h1>                <div class="subtitle">Track skills and projects with a clean, simple dashboard.</div>            </div>        </div>        <!-- user chip + dropdown -->        <div id="user-chip" class="chip hide" tabindex="0">            <span>Signed in as</span> <strong id="chip-name"></strong>            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">                <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>            </svg>            <div id="chip-menu" class="menu hide">                <button id="btn-goto-dashboard" type="button">Dashboard</button>                <button id="btn-goto-skills" type="button">Skills</button>                <button id="btn-goto-projects" type="button">Projects</button>                <hr style="border:0;border-top:1px solid var(--border);margin:6px 0">                <button id="btn-logout" type="button">Logout</button>            </div>        </div>    </div>    <!-- AUTH VIEW -->    <section id="auth-view" class="grid grid-2">        <div class="card">            <h2>Login</h2>            <label>Username                <input id="login-username" placeholder="e.g., user"/>            </label>            <label>Password                <input id="login-password" type="password" placeholder="••••••••"/>            </label>            <div class="btn-row">                <button class="btn" id="btn-login" type="button">Login</button>            </div>            <div id="login-status" class="status muted"></div>        </div>        <div class="card">            <h2>Sign Up</h2>            <label>Username                <input id="signup-username" placeholder="choose a username"/>            </label>            <label>Email                <input id="signup-email" placeholder="you@example.com"/>            </label>            <label>Password                <input id="signup-password" type="password" placeholder="min 6 characters"/>            </label>            <div class="btn-row">                <button class="btn" id="btn-signup" type="button">Create Account</button>            </div>            <div id="signup-status" class="status muted"></div>        </div>    </section>    <!-- APP VIEW -->    <section id="app-view" class="hide">        <!-- Tabs -->        <div class="btn-row" style="margin-bottom:10px">            <button class="btn tab active" id="tab-dashboard"  type="button">Dashboard</button>            <button class="btn tab"         id="tab-skills"     type="button">Skills</button>            <button class="btn tab"         id="tab-projects"   type="button">Projects</button>        </div>        <!-- Dashboard -->        <div id="view-dashboard">            <p id="welcome-line" class="welcome hide"></p>            <div class="grid grid-3">                <div class="stat">                    <span class="label">Total Skills</span>                    <span class="value" id="stat-skills">0</span>                </div>                <div class="stat">                    <span class="label">Total Projects</span>                    <span class="value" id="stat-projects">0</span>                </div>                <div class="stat">                    <span class="label">Completed Projects</span>                    <span class="value" id="stat-completed">0</span>                </div>            </div>            <div class="card" style="margin-top:16px">                <h2>Skills Overview</h2>                <canvas id="skills-chart" style="max-width:100%;"></canvas>            </div>            <div class="card" style="margin-top:16px">                <h2>Quick Actions</h2>                <div class="btn-row">                    <button class="btn" id="qa-add-skill" type="button">Add a Skill</button>                    <button class="btn" id="qa-add-project" type="button">Add a Project</button>                </div>            </div>            <div class="card" style="margin-top:16px">                <h2>AI Suggestions</h2>                <ul id="suggestions-list"><li class="muted">No suggestions yet.</li></ul>            </div>        </div>        <!-- Skills View -->        <div id="view-skills" class="hide">            <div class="card">                <h2>Add Skill</h2>                <div class="grid grid-2">                    <div>                        <label>Skill Name                            <input id="skill-name" placeholder="e.g., Java, SQL, Spring Boot"/>                        </label>                    </div>                    <div>                        <label>Level                            <select id="skill-level">                                <option value="">(optional)</option>                                <option>Beginner</option>                                <option>Intermediate</option>                                <option>Advanced</option>                            </select>                        </label>                    </div>                </div>                <label>Notes                    <textarea id="skill-notes" rows="3" placeholder="(optional) Where you used it, what you learned..."></textarea>                </label>                <div class="btn-row">                    <button class="btn" id="btn-add-skill" type="button">Add Skill</button>                </div>                <div id="skill-status" class="status muted"></div>            </div>            <div class="card">                <h2>Your Skills</h2>                <ul id="skills-list"><li class="muted">No skills yet. Add one!</li></ul>            </div>        </div>        <!-- Projects View -->        <div id="view-projects" class="hide">            <div class="card">                <h2>Add Project</h2>                <div class="grid grid-2">                    <div>                        <label>Title                            <input id="proj-title" placeholder="e.g., Skill Tracker MVP"/>                        </label>                    </div>                    <div>                        <label>Status                            <select id="proj-status">                                <option>In Progress</option>                                <option>Completed</option>                            </select>                        </label>                    </div>                </div>                <label>Tech Stack                    <input id="proj-tech" placeholder="e.g., Java, Spring Boot, PostgreSQL"/>                </label>                <label>Description                    <textarea id="proj-desc" rows="3" placeholder="(optional) Short summary..."></textarea>                </label>                <div class="btn-row">                    <button class="btn" id="btn-add-project" type="button">Add Project</button>                </div>                <div id="proj-status-msg" class="status muted"></div>            </div>            <div class="card">                <h2>Your Projects</h2>                <ul id="projects-list"><li class="muted">No projects yet. Add one!</li></ul>            </div>        </div>    </section></div><script>    /* ---------- helpers ---------- */    function $(id){ return document.getElementById(id); }    function setStatus(el, msg, cls='muted'){      if(!el) return;      el.className = 'status ' + cls;      el.textContent = msg;    }    function getUser(){      try { return JSON.parse(localStorage.getItem('user')); }      catch { return null; }    }    function setUser(u){ localStorage.setItem('user', JSON.stringify(u)); }    function clearUser(){ localStorage.removeItem('user'); }    const safeJson = async (res) => {      try { return await res.json(); } catch { return null; }    };    /* ---------- API endpoints ---------- */    const api = {      login:       '/api/auth/login',      signup:      '/api/auth/register',      skills:      '/api/skills',      projects:    '/api/projects',      suggestions: '/api/suggestions'    };    /* ---------- Modal helpers ---------- */    let currentSkillId = null;    function openSkillModal() {      const modal = $('skill-modal');      if (modal) modal.classList.remove('hide');    }    function closeSkillModal() {      const modal = $('skill-modal');      if (modal) modal.classList.add('hide');      currentSkillId = null;      $('modal-skill-name').value = '';      $('modal-skill-level').value = '';      $('modal-skill-notes').value = '';      $('skill-modal-status').textContent = '';      $('skill-modal-suggestions').textContent = '';      $('skill-modal-chat-input').value = '';      $('skill-modal-chat-reply').textContent = '';    }    /* ---------- Load skill details via backend ---------- */    async function openSkillDetail(skillId) {      const user = getUser();      if (!user) {        alert('Please login first.');        return;      }      currentSkillId = skillId;      const statusEl = $('skill-modal-status');      setStatus(statusEl, 'Loading skill…');      try {        const res = await fetch(`${api.skills}/${skillId}?userId=${user.userId}`);        const data = await safeJson(res);        if (!res.ok || !data) {          setStatus(            statusEl,            (data && (data.error || data.message)) || 'Failed to load skill',            'err'          );          return;        }        const skillName = data.name || data.skillName || '';        const level     = data.level || data.skillLevel || '';        const notes     = data.notes || data.description || '';        $('modal-skill-name').value  = skillName;        $('modal-skill-level').value = level;        $('modal-skill-notes').value = notes;        $('skill-modal-title').textContent = skillName          ? `Skill Detail — ${skillName}`          : 'Skill Detail';        setStatus(statusEl, 'Loaded.', 'ok');        openSkillModal();      } catch (e) {        setStatus(statusEl, 'Network error while loading skill', 'err');      }    }    /* ---------- Save edits to skill (level + notes) ---------- */    async function saveSkillDetail() {      const user = getUser();      const statusEl = $('skill-modal-status');      if (!user) {        setStatus(statusEl, 'Please login first.', 'err');        return;      }      if (!currentSkillId) {        setStatus(statusEl, 'No skill selected.', 'err');        return;      }      const level = $('modal-skill-level').value;      const notes = $('modal-skill-notes').value.trim();      setStatus(statusEl, 'Saving…');      try {        const res = await fetch(`${api.skills}/${currentSkillId}?userId=${user.userId}`, {          method: 'PUT',          headers: { 'Content-Type':'application/json' },          body: JSON.stringify({ level, notes })        });        const data = await safeJson(res); // may be null on 204        if (!res.ok) {          setStatus(            statusEl,            (data && (data.error || data.message)) || 'Failed to save skill',            'err'          );          return;        }        setStatus(statusEl, 'Saved!', 'ok');        await loadSkills();        await refreshDashboard();      } catch (e) {        setStatus(statusEl, 'Network error while saving', 'err');      }    }    /* ---------- Get AI suggestions for this skill ---------- */    async function getSkillAiSuggestions() {      const user = getUser();      const statusEl = $('skill-modal-status');      const suggEl = $('skill-modal-suggestions');      if (!user) {        setStatus(statusEl, 'Please login first.', 'err');        return;      }      if (!currentSkillId) {        setStatus(statusEl, 'No skill selected.', 'err');        return;      }      setStatus(statusEl, 'Getting AI suggestions…');      suggEl.textContent = 'Thinking…';      try {        const res = await fetch(`${api.skills}/${currentSkillId}/ai-suggestions?userId=${user.userId}`, {          method:'POST'        });        const data = await safeJson(res);        if (!res.ok) {          setStatus(            statusEl,            (data && (data.error || data.message)) || 'Failed to get suggestions',            'err'          );          suggEl.textContent = '';          return;        }        suggEl.textContent = data.suggestions || 'No suggestions received.';        setStatus(statusEl, 'Suggestions updated.', 'ok');      } catch (e) {        setStatus(statusEl, 'Network error while asking AI', 'err');        suggEl.textContent = '';      }    }    /* ---------- Chat about the skill ---------- */    async function chatAboutSkill() {      const user = getUser();      const statusEl = $('skill-modal-status');      const replyEl = $('skill-modal-chat-reply');      const inputEl = $('skill-modal-chat-input');      if (!user) {        setStatus(statusEl, 'Please login first.', 'err');        return;      }      if (!currentSkillId) {        setStatus(statusEl, 'No skill selected.', 'err');        return;      }      const message = inputEl.value.trim();      if (!message) {        setStatus(statusEl, 'Type a question first.', 'err');        return;      }      setStatus(statusEl, 'Sending question to AI…');      replyEl.textContent = 'Thinking…';      try {        const res = await fetch(`${api.skills}/${currentSkillId}/ai-chat?userId=${user.userId}`, {          method:'POST',          headers:{'Content-Type':'application/json'},          body: JSON.stringify({ message })        });        const data = await safeJson(res);        if (!res.ok) {          setStatus(            statusEl,            (data && (data.error || data.message)) || 'Failed to get reply',            'err'          );          replyEl.textContent = '';          return;        }        // Clear the user's question after success        inputEl.value = '';        replyEl.textContent = data.reply || '';        setStatus(statusEl, 'AI reply received.', 'ok');      } catch (e) {        setStatus(statusEl, 'Network error while chatting with AI', 'err');        replyEl.textContent = '';      }    }    /* ---------- view helpers ---------- */    function activateTab(tabId){      ['tab-dashboard','tab-skills','tab-projects'].forEach(id=>{        const el = $(id); if(!el) return;        if(id===tabId) el.classList.add('active'); else el.classList.remove('active');      });      $('view-dashboard').classList.toggle('hide', tabId!=='tab-dashboard');      $('view-skills').classList.toggle('hide', tabId!=='tab-skills');      $('view-projects').classList.toggle('hide', tabId!=='tab-projects');      if (tabId === 'tab-dashboard') {        loadSuggestions();      }    }    function showApp(user){      $('auth-view')?.classList.add('hide');      $('app-view')?.classList.remove('hide');      $('user-chip')?.classList.remove('hide');      $('chip-name').textContent = user.username;      const w = $('welcome-line');      if (w){        w.textContent = `Welcome, ${user.username}!`;        w.classList.remove('hide');      }      activateTab('tab-dashboard');      refreshDashboard();      loadSuggestions();    }    function showAuth(){      $('app-view')?.classList.add('hide');      $('auth-view')?.classList.remove('hide');      $('user-chip')?.classList.add('hide');      $('chip-name').textContent = '';      $('skills-list').innerHTML   = '<li class="muted">Login to see your skills.</li>';      $('projects-list').innerHTML = '<li class="muted">Login to see your projects.</li>';      $('stat-skills').textContent = '0';      $('stat-projects').textContent = '0';      $('stat-completed').textContent = '0';      const sug = $('suggestions-list');      if (sug) sug.innerHTML = '<li class="muted">No suggestions yet.</li>';    }    /* ---------- auth actions ---------- */    async function login(){      const u = $('login-username')?.value.trim();      const p = $('login-password')?.value.trim();      const s = $('login-status');      if(!u || !p){ setStatus(s,'Enter username and password','err'); return; }      setStatus(s,'Logging in…');      try{        const res = await fetch(api.login, {          method:'POST',          headers:{'Content-Type':'application/json'},          body: JSON.stringify({ username:u, password:p })        });        const data = await safeJson(res);        if(!res.ok){          setStatus(s, (data && (data.error||data.message)) || 'Login failed', 'err');          return;        }        if(!data || data.userId==null){          setStatus(s,'Unexpected response from server','err');          return;        }        setUser({ userId:data.userId, username:data.username || u });        setStatus(s,'Success!','ok');        showApp(getUser());      }catch(e){        setStatus(s,'Network error','err');      }    }    async function signup(){      const u = $('signup-username')?.value.trim();      const e = $('signup-email')?.value.trim();      const p = $('signup-password')?.value.trim();      const s = $('signup-status');      if(!u || !p){        setStatus(s,'Username and password required','err');        return;      }      setStatus(s,'Creating account…');      try{        const res = await fetch(api.signup, {          method:'POST',          headers:{'Content-Type':'application/json'},          body: JSON.stringify({ username:u, email:e, password:p })        });        const data = await safeJson(res);        if(!res.ok){          setStatus(s, (data && (data.error||data.message)) || 'Sign up failed','err');          return;        }        setUser({ userId:data.userId, username:data.username || u });        setStatus(s,'Account created!','ok');        showApp(getUser());      }catch(err){        setStatus(s,'Network error','err');      }    }    function logout(){      clearUser();      hideMenu();      showAuth();    }    /* ---------- skills ---------- */    async function addSkill(){      const user = getUser(); const s = $('skill-status');      if(!user){ setStatus(s,'Please login first.','err'); return; }      const name  = $('skill-name')?.value.trim();      const level = $('skill-level')?.value;      const notes = $('skill-notes')?.value.trim();      if(!name){ setStatus(s,'Skill name is required.','err'); return; }      setStatus(s,'Saving…');      try{        const res = await fetch(api.skills, {          method:'POST',          headers:{'Content-Type':'application/json'},          body: JSON.stringify({ userId:user.userId, name, level, notes })        });        const data = await safeJson(res);        if(!res.ok){          setStatus(s,'Failed to save.','err');          return;        }        setStatus(s,'Saved!','ok');        $('skill-name').value='';        $('skill-level').value='';        $('skill-notes').value='';        await loadSkills();        refreshDashboard();        loadSuggestions();      }catch(e){        setStatus(s,'Network error','err');      }    }    async function loadSkills(){      const user = getUser();      const list = $('skills-list');      if(!user){        list.innerHTML = '<li class="muted">Login to see your skills.</li>';        return [];      }      list.innerHTML = '<li class="muted">Loading…</li>';      try{        const res = await fetch(`${api.skills}?userId=${user.userId}`);        const data = await safeJson(res) || [];        if(!res.ok){          list.innerHTML = '<li class="muted">Failed to load skills.</li>';          return [];        }        if(!data.length){          list.innerHTML = '<li class="muted">No skills yet. Add one!</li>';          return [];        }        list.innerHTML = '';        data.forEach(s => {          const li = document.createElement('li');          li.dataset.skillId = s.id;          const when = s.createdAt ? new Date(s.createdAt).toLocaleString() : '';          li.innerHTML = `            <strong>${s.name}</strong>${s.level ? ' (' + s.level + ')' : ''}${when ? ' — <span class="muted">' + when + '</span>' : ''}            <br/>            <button type="button" class="btn ghost" style="margin-top:6px;padding:6px 10px;font-size:.8rem"              onclick="openSkillDetail(${s.id})">              View / Edit &amp; AI Help            </button>          `;          list.appendChild(li);        });        return data;      }catch(e){        list.innerHTML = '<li class="muted">Network error.</li>';        return [];      }    }    /* ---------- projects ---------- */    async function addProject(){      const user = getUser(); const s = $('proj-status-msg');      if(!user){ setStatus(s,'Please login first.','err'); return; }      const title = $('proj-title')?.value.trim();      const description = $('proj-desc')?.value.trim();      const techStack = $('proj-tech')?.value.trim();      const status = $('proj-status')?.value;      if(!title){ setStatus(s,'Project title is required.','err'); return; }      setStatus(s,'Saving…');      try{        const res = await fetch(api.projects, {          method:'POST',          headers:{'Content-Type':'application/json'},          body: JSON.stringify({ userId:user.userId, title, description, techStack, status })        });        const data = await safeJson(res);        if(!res.ok){          setStatus(s,'Failed to save project.','err');          return;        }        setStatus(s,'Saved!','ok');        $('proj-title').value='';        $('proj-desc').value='';        $('proj-tech').value='';        $('proj-status').value='In Progress';        await loadProjects();        refreshDashboard();        loadSuggestions();      }catch(e){        setStatus(s,'Network error','err');      }    }    async function loadProjects(){      const user = getUser();      const list = $('projects-list');      if(!user){        list.innerHTML = '<li class="muted">Login to see your projects.</li>';        return [];      }      list.innerHTML = '<li class="muted">Loading…</li>';      try{        const res = await fetch(`${api.projects}?userId=${user.userId}`);        const data = await safeJson(res) || [];        if(!res.ok){          list.innerHTML = '<li class="muted">Failed to load projects.</li>';          return [];        }        if(!data.length){          list.innerHTML = '<li class="muted">No projects yet. Add one!</li>';          return [];        }        list.innerHTML = '';        data.forEach(p=>{          const li = document.createElement('li');          const when = p.createdAt ? new Date(p.createdAt).toLocaleString() : '';          li.textContent = `${p.title} — ${p.status}${p.techStack?' ['+p.techStack+']':''}${when?' — '+when:''}`;          list.appendChild(li);        });        return data;      }catch(e){        list.innerHTML = '<li class="muted">Network error.</li>';        return [];      }    }    async function loadSuggestions(){      const user = getUser();      const list = $('suggestions-list');      if(!list) return;      if(!user){        list.innerHTML = '<li class="muted">Login to see suggestions.</li>';        return;      }      list.innerHTML = '<li class="muted">Thinking…</li>';      try{        const res = await fetch(`${api.suggestions}?userId=${user.userId}`);        const data = await safeJson(res) || [];        if(!res.ok){          list.innerHTML = '<li class="muted">Failed to load suggestions.</li>';          return;        }        if(!Array.isArray(data) || !data.length){          list.innerHTML = '<li class="muted">No suggestions right now.</li>';          return;        }        list.innerHTML = '';        data.forEach(s=>{          const li = document.createElement('li');          const kind = (s.type||'TIP').toUpperCase();          li.innerHTML = `<strong>[${kind}] ${s.title}</strong>${            s.reason ? `<br><span class="muted">${s.reason}</span>` : ''          }${            s.link ? `<br><a href="${s.link}" target="_blank" rel="noreferrer">Resource</a>` : ''          }`;          list.appendChild(li);        });      }catch{        list.innerHTML = '<li class="muted">Network error.</li>';      }    }    /* ---------- dashboard ---------- */    async function refreshDashboard(){      const [skills, projects] = await Promise.all([loadSkills(), loadProjects()]);      $('stat-skills').textContent = skills.length;      $('stat-projects').textContent = projects.length;      $('stat-completed').textContent = projects.filter(p => (p.status||'').toLowerCase()==='completed').length;      renderSkillsChart(skills);    }    let skillsChart = null;    function renderSkillsChart(skills) {      const canvas = $('skills-chart');      if (!canvas || typeof Chart === 'undefined') return;      const counts = { Beginner: 0, Intermediate: 0, Advanced: 0, Unknown: 0 };      skills.forEach(s => {        const lvl = (s.level || '').toLowerCase();        if (lvl === 'beginner') counts.Beginner++;        else if (lvl === 'intermediate') counts.Intermediate++;        else if (lvl === 'advanced') counts.Advanced++;        else counts.Unknown++;      });      const labels = Object.keys(counts);      const data = Object.values(counts);      const config = {        type: 'bar',        data: {          labels,          datasets: [{            label: 'Skills by level',            data          }]        },        options: {          responsive: true,          plugins: {            legend: { display: false }          },          scales: {            x: { grid: { display: false } },            y: { beginAtZero: true, ticks: { stepSize: 1 } }          }        }      };      if (skillsChart) {        skillsChart.data = config.data;        skillsChart.update();      } else {        skillsChart = new Chart(canvas.getContext('2d'), config);      }    }    /* ---------- chip menu ---------- */    function toggleMenu(){      $('chip-menu').classList.toggle('hide');    }    function hideMenu(){      $('chip-menu').classList.add('hide');    }    /* ---------- boot ---------- */    document.addEventListener('DOMContentLoaded', () => {      // auth      $('btn-login')?.addEventListener('click', login);      $('btn-signup')?.addEventListener('click', signup);      // tabs      $('tab-dashboard')?.addEventListener('click', ()=> activateTab('tab-dashboard'));      $('tab-skills')?.addEventListener('click', ()=> { activateTab('tab-skills'); loadSkills(); });      $('tab-projects')?.addEventListener('click', ()=> { activateTab('tab-projects'); loadProjects(); });      // quick actions      $('qa-add-skill')?.addEventListener('click', ()=> { activateTab('tab-skills'); });      $('qa-add-project')?.addEventListener('click', ()=> { activateTab('tab-projects'); });      // skill/project actions      $('btn-add-skill')?.addEventListener('click', addSkill);      $('btn-add-project')?.addEventListener('click', addProject);      // chip menu      $('user-chip')?.addEventListener('click', toggleMenu);      $('btn-goto-dashboard')?.addEventListener('click', ()=>{ hideMenu(); activateTab('tab-dashboard'); });      $('btn-goto-skills')?.addEventListener('click', ()=>{ hideMenu(); activateTab('tab-skills'); loadSkills(); });      $('btn-goto-projects')?.addEventListener('click', ()=>{ hideMenu(); activateTab('tab-projects'); loadProjects(); });      $('btn-logout')?.addEventListener('click', logout);      document.addEventListener('click', (e)=> {        const chip = $('user-chip'); const menu = $('chip-menu');        if(!chip || !menu) return;        if (!chip.contains(e.target)) hideMenu();      });      // initial view      const current = getUser();      if(current) showApp(current); else showAuth();    });</script><!-- Skill Detail Modal --><div id="skill-modal" class="hide">    <div class="card">        <button type="button"                class="modal-close-btn"                onclick="closeSkillModal()">            ✕        </button>        <h2 id="skill-modal-title">Skill Detail</h2>        <label>Skill Name            <input id="modal-skill-name" readonly />        </label>        <label>Level            <select id="modal-skill-level">                <option value="">(optional)</option>                <option>Beginner</option>                <option>Intermediate</option>                <option>Advanced</option>            </select>        </label>        <label>Notes            <textarea id="modal-skill-notes" rows="3"></textarea>        </label>        <div class="btn-row">            <button class="btn" type="button" onclick="saveSkillDetail()">Save</button>            <button class="btn ghost" type="button" onclick="getSkillAiSuggestions()">Get AI Suggestions</button>        </div>        <div id="skill-modal-status" class="status muted"></div>        <hr style="margin:16px 0;border-color:var(--border)">        <h3>Suggestions</h3>        <pre id="skill-modal-suggestions" class="muted" style="white-space:pre-wrap;"></pre>        <hr style="margin:16px 0;border-color:var(--border)">        <h3>Ask AI About This Skill</h3>        <textarea id="skill-modal-chat-input" rows="3"                  placeholder="Ask a question about how to improve this skill..."></textarea>        <div class="btn-row">            <button class="btn" type="button" onclick="chatAboutSkill()">Ask</button>        </div>        <div id="skill-modal-chat-reply" class="status muted" style="margin-top:8px"></div>    </div></div></body></html>