<!doctype html><html lang="en"><head>    <meta charset="utf-8"/>    <title>Skill/Project Tracker â€” MVP</title>    <meta name="viewport" content="width=device-width, initial-scale=1"/>    <style>        :root{          --bg-soft: #eef4ff;              /* very light blue background */          --bg-soft-2: #e2ecff;          --bg-card: #ffffff;              /* white cards */          --text-main: #1e293b;            /* slate text */          --text-muted: #64748b;           /* muted slate */          --border: rgba(148,163,184,.4);          --primary: #3b82f6;              /* blue-500 */          --primary-light: #93c5fd;        /* blue-300 */          --primary-soft: #dbeafe;         /* blue-100 */          --success: #16a34a;          --danger: #dc2626;        }        *{ box-sizing:border-box; }        body{          margin:0;          min-height:100vh;          color:var(--text-main);          background:            radial-gradient(800px 800px at 0% 0%, #dbeafe 0%, transparent 55%),            radial-gradient(900px 900px at 100% 0%, #e0f2fe 0%, transparent 55%),            linear-gradient(180deg, var(--bg-soft), var(--bg-soft-2));          font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Noto Sans";        }        .container{          max-width:1080px;          margin:0 auto;          padding:24px;        }        .header{          display:flex;          justify-content:space-between;          align-items:center;          margin-bottom:16px;        }        .brand{          display:flex;          align-items:center;          gap:14px;        }        .brand-logo{          height:40px;          width:40px;          border-radius:12px;          background: radial-gradient(circle at 30% 30%, #ffffff, #bfdbfe 45%, #60a5fa 75%);          box-shadow:0 4px 12px rgba(37,99,235,.4);          display:flex;          align-items:center;          justify-content:center;          font-weight:800;          color:#1d4ed8;          font-size:1.1rem;        }        h1{          margin:0;          font-weight:800;          letter-spacing:.2px;          font-size:1.4rem;        }        .subtitle{          margin-top:2px;          font-size:.95rem;          color:var(--text-muted);        }        /* Chip / user menu */        .chip{          position:relative;          display:inline-flex;          align-items:center;          gap:8px;          padding:8px 14px;          border-radius:999px;          border:1px solid var(--border);          background:rgba(255,255,255,.9);          color:var(--text-muted);          font-size:.95rem;          cursor:pointer;          box-shadow:0 4px 12px rgba(15,23,42,.08);        }        .chip strong{ color:var(--text-main); }        .chip svg{ opacity:.7; }        .menu{          position:absolute;          right:0;          top:115%;          background:white;          border-radius:12px;          border:1px solid var(--border);          min-width:180px;          padding:6px;          z-index:20;          box-shadow:0 12px 30px rgba(15,23,42,.1);        }        .menu button{          width:100%;          text-align:left;          background:transparent;          color:var(--text-main);          border:0;          padding:10px 12px;          border-radius:8px;          cursor:pointer;          font-size:.95rem;        }        .menu button:hover{          background:var(--primary-soft);        }        .hide{ display:none; }        /* Cards */        .card{          background:var(--bg-card);          border:1px solid var(--border);          border-radius:14px;          padding:20px;          box-shadow:0 4px 14px rgba(15,23,42,.08);        }        /* Grid layout */        .grid{          display:grid;          gap:20px;        }        .grid-2{ grid-template-columns:1fr 1fr; }        .grid-3{ grid-template-columns:repeat(3,1fr); }        /* Only collapse the 3-column dashboard on small screens.           Keep login/signup side-by-side even on smaller widths. */        @media (max-width:980px){          .grid-3{ grid-template-columns:1fr; }        }        /* Typography / labels / inputs */        label{          display:block;          margin-top:10px;          font-size:.95rem;          color:var(--text-main);        }        input, select, textarea{          width:100%;          margin-top:6px;          padding:12px 14px;          border-radius:10px;          border:1px solid var(--border);          background:#f9fbff;          font-size:1rem;          color:var(--text-main);          outline:none;        }        input:focus, select:focus, textarea:focus{          border-color:var(--primary-light);          box-shadow:0 0 0 1px var(--primary-light);        }        input[readonly]{          background:#eff3ff;          opacity:0.85;          cursor:not-allowed;        }        textarea{ resize:vertical; }        /* Buttons */        .btn-row{          display:flex;          gap:10px;          flex-wrap:wrap;          margin-top:14px;        }        .btn{          border:none;          border-radius:10px;          padding:12px 16px;          cursor:pointer;          color:white;          font-weight:600;          background:var(--primary);          box-shadow:0 4px 12px rgba(59,130,246,.35);          font-size:.95rem;        }        .btn:hover{          background:#2563eb;        }        .btn.ghost{          background:white;          color:var(--primary);          border:1px solid var(--primary-light);          box-shadow:none;        }        .btn.ghost:hover{          background:var(--primary-soft);        }        .btn.tab{          padding:10px 18px;          border-radius:999px;          background:var(--primary-soft);          color:#1d4ed8;        }        .btn.tab.active{          background:var(--primary);          color:white;        }        .status{          margin-top:10px;          font-size:.9rem;          color:var(--text-muted);        }        .status.ok{ color:var(--success); }        .status.err{ color:var(--danger); }        ul{          padding-left:18px;          margin:8px 0 0;        }        .muted{ color:var(--text-muted); }        /* Welcome line */        .welcome{          font-size:1rem;          color:#1d4ed8;          margin:0 0 10px;          opacity:0;          transform:translateY(-6px);          animation:welcome-slide .6s ease-out forwards;        }        @keyframes welcome-slide{          to{ opacity:1; transform:translateY(0); }        }        /* Stats */        .stat{          background:white;          padding:16px;          border-radius:12px;          border:1px solid var(--border);          box-shadow:0 2px 8px rgba(15,23,42,.06);        }        .stat .label{          color:var(--text-muted);          font-size:.9rem;        }        .stat .value{          font-size:1.6rem;          font-weight:700;        }        /* Skill modal overlay */        #skill-modal{          position:fixed;          inset:0;          background:rgba(15,23,42,.32);          display:flex;          align-items:center;          justify-content:center;          z-index:50;        }        /* Skill modal card override */        #skill-modal .card{          max-width:640px;          width:100%;          max-height:90vh;          overflow:auto;          position:relative;        }        /* Footer / Get to know us */        .footer-card{          margin-top:32px;        }        .footer-meta{          font-size:.9rem;          color:var(--text-muted);          margin-top:6px;        }        .footer-grid{          display:grid;          gap:12px;          grid-template-columns:1.4fr 1fr;        }        @media (max-width:780px){          .footer-grid{ grid-template-columns:1fr; }        }        a{          color:#2563eb;        }        a:hover{          text-decoration:underline;        }    </style>    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script></head><body><div class="container">    <div class="header">        <div class="brand">            <div class="brand-logo">ST</div>            <div>                <h1>Skill/Project Tracker â€” MVP</h1>                <div class="subtitle">Track skills & projects with a simple dashboard.</div>            </div>        </div>        <!-- user chip + dropdown -->        <div id="user-chip" class="chip hide" tabindex="0">            <span>Signed in as</span> <strong id="chip-name"></strong>            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="opacity:.7">                <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>            </svg>            <div id="chip-menu" class="menu hide">                <button id="btn-goto-dashboard" type="button">Dashboard</button>                <button id="btn-goto-skills" type="button">Skills</button>                <button id="btn-goto-projects" type="button">Projects</button>                <hr style="border:0;border-top:1px solid var(--border);margin:6px 0">                <button id="btn-logout" type="button">Logout</button>            </div>        </div>    </div>    <!-- AUTH VIEW (login + signup side by side) -->    <section id="auth-view" class="grid grid-2">        <div class="card">            <h2>Login</h2>            <label>Username                <input id="login-username" placeholder="e.g., user"/>            </label>            <label>Password                <input id="login-password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"/>            </label>            <div class="btn-row">                <button class="btn" id="btn-login" type="button">Login</button>            </div>            <div id="login-status" class="status muted"></div>        </div>        <div class="card">            <h2>Sign Up</h2>            <label>Username                <input id="signup-username" placeholder="choose a username"/>            </label>            <label>Email                <input id="signup-email" placeholder="you@example.com"/>            </label>            <label>Password                <input id="signup-password" type="password" placeholder="min 6 characters"/>            </label>            <div class="btn-row">                <button class="btn" id="btn-signup" type="button">Create Account</button>            </div>            <div id="signup-status" class="status muted"></div>        </div>    </section>    <!-- APP VIEW -->    <section id="app-view" class="hide">        <!-- Tabs -->        <div class="btn-row" style="margin-bottom:10px">            <button class="btn tab active" id="tab-dashboard"  type="button">Dashboard</button>            <button class="btn tab"         id="tab-skills"     type="button">Skills</button>            <button class="btn tab"         id="tab-projects"   type="button">Projects</button>        </div>        <!-- Dashboard -->        <div id="view-dashboard">            <p id="welcome-line" class="welcome hide"></p>            <div class="grid grid-3">                <div class="stat">                    <span class="label">Total Skills</span>                    <span class="value" id="stat-skills">0</span>                </div>                <div class="stat">                    <span class="label">Total Projects</span>                    <span class="value" id="stat-projects">0</span>                </div>                <div class="stat">                    <span class="label">Completed Projects</span>                    <span class="value" id="stat-completed">0</span>                </div>            </div>            <div class="card" style="margin-top:16px">                <h2>Skills Overview</h2>                <canvas id="skills-chart" style="max-width:100%;"></canvas>            </div>            <div class="card" style="margin-top:16px">                <h2>Quick Actions</h2>                <div class="btn-row">                    <button class="btn" id="qa-add-skill" type="button">Add a Skill</button>                    <button class="btn" id="qa-add-project" type="button">Add a Project</button>                </div>            </div>            <!-- AI Suggestions -->            <div class="card" style="margin-top:16px">                <h2>AI Suggestions</h2>                <ul id="suggestions-list"><li class="muted">Login to see suggestions.</li></ul>            </div>        </div>        <!-- Skills View -->        <div id="view-skills" class="hide">            <div class="card">                <h2>Add Skill</h2>                <div class="grid grid-2">                    <div>                        <label>Skill Name                            <input id="skill-name" placeholder="e.g., Java, SQL, Spring Boot"/>                        </label>                    </div>                    <div>                        <label>Level                            <select id="skill-level">                                <option value="">(optional)</option>                                <option>Beginner</option>                                <option>Intermediate</option>                                <option>Advanced</option>                            </select>                        </label>                    </div>                </div>                <label>Notes                    <textarea id="skill-notes" rows="3" placeholder="(optional) Where you used it, what you learned..."></textarea>                </label>                <div class="btn-row">                    <button class="btn" id="btn-add-skill" type="button">Add Skill</button>                </div>                <div id="skill-status" class="status muted"></div>            </div>            <div class="card">                <h2>Your Skills</h2>                <ul id="skills-list"><li class="muted">No skills yet. Add one!</li></ul>            </div>        </div>        <!-- Projects View -->        <div id="view-projects" class="hide">            <div class="card">                <h2>Add Project</h2>                <div class="grid grid-2">                    <div>                        <label>Title                            <input id="proj-title" placeholder="e.g., Skill Tracker MVP"/>                        </label>                    </div>                    <div>                        <label>Status                            <select id="proj-status">                                <option>In Progress</option>                                <option>Completed</option>                            </select>                        </label>                    </div>                </div>                <label>Tech Stack                    <input id="proj-tech" placeholder="e.g., Java, Spring Boot, PostgreSQL"/>                </label>                <label>Description                    <textarea id="proj-desc" rows="3" placeholder="(optional) Short summary..."></textarea>                </label>                <div class="btn-row">                    <button class="btn" id="btn-add-project" type="button">Add Project</button>                </div>                <div id="proj-status-msg" class="status muted"></div>            </div>            <div class="card">                <h2>Your Projects</h2>                <ul id="projects-list"><li class="muted">No projects yet. Add one!</li></ul>            </div>        </div>    </section>    <!-- FOOTER / Get to know us -->    <section class="card footer-card">        <h2>Get to know us</h2>        <div class="footer-grid">            <div>                <p>                    Skill/Project Tracker started as a small practicum idea:                    a single place to log what youâ€™re learning and how youâ€™re applying it.                </p>                <p>                    Use it to track coursework, certifications, hackathons, and side-projects,                    then lean on AI to suggest your next tiny improvement.                </p>            </div>            <div>                <div class="footer-meta"><strong>What you can do here:</strong></div>                <ul class="muted">                    <li>Capture skills with simple notes.</li>                    <li>Link skills to real projects.</li>                    <li>Ask AI for learning paths and tiny weekend builds.</li>                </ul>            </div>        </div>        <p class="footer-meta">            Built with ðŸ’™ for software students who are juggling courses, jobs, and side quests.        </p>    </section></div><script>    /* ---------- helpers ---------- */    function $(id){ return document.getElementById(id); }    function setStatus(el, msg, cls='muted'){      if(!el) return;      el.className = 'status ' + cls;      el.textContent = msg;    }    // keep user only in memory (not persisted)    let currentUser = null;    function getUser() {      return currentUser;    }    function setUser(u) {      currentUser = u;    }    function clearUser() {      currentUser = null;    }    const safeJson = async (res) => { try { return await res.json(); } catch { return null; } };    /* ---------- API endpoints ---------- */   // CHANGE THIS to your backend portconst BACKEND_BASE = 'https://skill-project-tracker.onrender.com';const api = {  login:       `${BACKEND_BASE}/api/auth/login`,  signup:      `${BACKEND_BASE}/api/auth/register`,  skills:      `${BACKEND_BASE}/api/skills`,  projects:    `${BACKEND_BASE}/api/projects`,  suggestions: `${BACKEND_BASE}/api/suggestions`};    /*-------------Open & close modal------------*/    let currentSkillId = null;    function openSkillModal() {      const modal = $('skill-modal');      if (!modal) return;      modal.style.display = 'flex';      modal.classList.remove('hide');    }    function closeSkillModal() {      const modal = $('skill-modal');      if (!modal) return;      modal.style.display = 'none';      modal.classList.add('hide');      currentSkillId = null;      // Clear fields      const nameEl = $('modal-skill-name');      const levelEl = $('modal-skill-level');      const notesEl = $('modal-skill-notes');      const statusEl = $('skill-modal-status');      const suggEl = $('skill-modal-suggestions');      const chatInput = $('skill-modal-chat-input');      const chatReply = $('skill-modal-chat-reply');      if (nameEl) nameEl.value = '';      if (levelEl) levelEl.value = '';      if (notesEl) notesEl.value = '';      if (statusEl) { statusEl.textContent = ''; statusEl.className = 'status muted'; }      if (suggEl) suggEl.textContent = '';      if (chatInput) chatInput.value = '';      if (chatReply) chatReply.textContent = '';    }    /*-------Load skill details via backend------------*/   async function openSkillDetail(skillId) {  const user = getUser();  if (!user || !user.userId) {    alert('Please login first.');    return;  }  currentSkillId = skillId;  // âœ… Always set the name from the list FIRST (so modal shows name immediately)  let fallbackName = '';  const li = document.querySelector(`li[data-skill-id="${skillId}"]`);  if (li) {    const strong = li.querySelector('strong');    if (strong) fallbackName = strong.textContent.trim();  }  $('modal-skill-name').value = fallbackName;  $('skill-modal-title').textContent = fallbackName    ? `Skill Detail â€” ${fallbackName}`    : 'Skill Detail';  openSkillModal();  const statusEl = $('skill-modal-status');  setStatus(statusEl, 'Loading skillâ€¦');  try {    const url = `${api.skills}/${skillId}?userId=${encodeURIComponent(user.userId)}`;    const res = await fetch(url);    const data = await readBody(res);    if (!res.ok) {      console.error('openSkillDetail failed:', res.status, data);      const msg = (data && (data.error || data.message)) || `HTTP ${res.status}`;      setStatus(statusEl, `Failed to load skill: ${msg}`, 'err');      return; // keep fallback name visible    }    // âœ… Try multiple shapes for name/level/notes    const skillName =      data?.name ||      data?.skillName ||      data?.title ||      data?.skill?.name ||      data?.skill?.skillName ||      fallbackName || '';    const level =      data?.level ||      data?.skillLevel ||      data?.skill?.level ||      data?.skill?.skillLevel ||      '';    const notes =      data?.notes ||      data?.description ||      data?.skill?.notes ||      data?.skill?.description ||      '';    $('modal-skill-name').value = skillName;    $('modal-skill-level').value = level;    $('modal-skill-notes').value = notes;    $('skill-modal-title').textContent = skillName      ? `Skill Detail â€” ${skillName}`      : 'Skill Detail';    setStatus(statusEl, 'Loaded.', 'ok');  } catch (e) {    console.error('Network error in openSkillDetail:', e);    setStatus(statusEl, 'Network error while loading skill', 'err');  }}    /*------------------Save edits to skill-------------*/    async function saveSkillDetail() {      const user = getUser();      const statusEl = $('skill-modal-status');      if (!user) {        setStatus(statusEl, 'Please login first.', 'err');        return;      }      if (!currentSkillId) {        setStatus(statusEl, 'No skill selected.', 'err');        return;      }      const level = $('modal-skill-level').value;      const notes = $('modal-skill-notes').value.trim();      setStatus(statusEl, 'Savingâ€¦');      try {        const res = await fetch(`${api.skills}/${currentSkillId}?userId=${user.userId}`, {          method: 'PUT',          headers: { 'Content-Type': 'application/json' },          body: JSON.stringify({ level, notes })        });        const data = await safeJson(res);        if (!res.ok) {          setStatus(            statusEl,            (data && (data.error || data.message)) || 'Failed to save skill',            'err'          );          return;        }        setStatus(statusEl, 'Saved!', 'ok');        await loadSkills();        await refreshDashboard();      } catch (e) {        console.error('Network error while saving skill', e);        setStatus(statusEl, 'Network error while saving', 'err');      }    }    /*----------------Get AI suggestions for this skill-----------*/    async function getSkillAiSuggestions() {      const user = getUser();      const statusEl = $('skill-modal-status');      const suggEl = $('skill-modal-suggestions');      if (!user) {        setStatus(statusEl, 'Please login first.', 'err');        return;      }      if (!currentSkillId) {        setStatus(statusEl, 'No skill selected.', 'err');        return;      }      setStatus(statusEl, 'Getting AI suggestionsâ€¦');      suggEl.textContent = 'Thinkingâ€¦';      try {        const res = await fetch(`${api.skills}/${currentSkillId}/ai-suggestions?userId=${user.userId}`, {          method:'POST'        });        const data = await safeJson(res);        if (!res.ok) {          setStatus(statusEl, (data && (data.error || data.message)) || 'Failed to get suggestions', 'err');          suggEl.textContent = '';          return;        }        suggEl.textContent = data.suggestions || 'No suggestions received.';        setStatus(statusEl, 'Suggestions updated.', 'ok');      } catch (e) {        console.error('Network error while asking AI', e);        setStatus(statusEl, 'Network error while asking AI', 'err');        suggEl.textContent = '';      }    }    /*--------------------Chat about the skill--------------*/    async function chatAboutSkill() {      const user = getUser();      const statusEl = $('skill-modal-status');      const replyEl = $('skill-modal-chat-reply');      const inputEl = $('skill-modal-chat-input');      if (!user) {        setStatus(statusEl, 'Please login first.', 'err');        return;      }      if (!currentSkillId) {        setStatus(statusEl, 'No skill selected.', 'err');        return;      }      const message = inputEl.value.trim();      if (!message) {        setStatus(statusEl, 'Type a question first.', 'err');        return;      }      setStatus(statusEl, 'Sending question to AIâ€¦');      replyEl.textContent = 'Thinkingâ€¦';      try {        const res = await fetch(`${api.skills}/${currentSkillId}/ai-chat?userId=${user.userId}`, {          method: 'POST',          headers: { 'Content-Type': 'application/json' },          body: JSON.stringify({ message })        });        const data = await safeJson(res);        if (!res.ok) {          setStatus(            statusEl,            (data && (data.error || data.message)) || 'Failed to get reply',            'err'          );          replyEl.textContent = '';          return;        }        // Clear the user's question after success        inputEl.value = '';        replyEl.textContent = data.reply || '';        setStatus(statusEl, 'AI reply received.', 'ok');      } catch (e) {        console.error('Network error while chatting with AI', e);        setStatus(statusEl, 'Network error while chatting with AI', 'err');        replyEl.textContent = '';      }    }    /* ---------- view helpers ---------- */    function activateTab(tabId){      ['tab-dashboard','tab-skills','tab-projects'].forEach(id=>{        const el = $(id); if(!el) return;        if(id===tabId) el.classList.add('active'); else el.classList.remove('active');      });      $('view-dashboard').classList.toggle('hide', tabId!=='tab-dashboard');      $('view-skills').classList.toggle('hide', tabId!=='tab-skills');      $('view-projects').classList.toggle('hide', tabId!=='tab-projects');      if (tabId === 'tab-dashboard') {        loadSuggestions();      }    }    function showApp(user){      const auth = $('auth-view');      const app  = $('app-view');      const chip = $('user-chip');      // FORCE hide auth section      if (auth) {        auth.classList.add('hide');        auth.style.display = 'none';      }      // FORCE show app section      if (app) {        app.classList.remove('hide');        app.style.display = 'block';      }      if (chip) {        chip.classList.remove('hide');      }      if ($('chip-name')) {        $('chip-name').textContent = user.username || '';      }      const w = $('welcome-line');      if (w){        w.textContent = `Welcome, ${user.username || ''}!`;        w.classList.remove('hide');      }      activateTab('tab-dashboard');      refreshDashboard();      loadSuggestions();    }    function showAuth(){      const auth = $('auth-view');      const app  = $('app-view');      const chip = $('user-chip');      if (auth) {        auth.classList.remove('hide');        auth.style.display = 'grid';      }      if (app) {        app.classList.add('hide');        app.style.display = 'none';      }      if (chip) {        chip.classList.add('hide');      }      if ($('chip-name')) $('chip-name').textContent = '';      $('skills-list').innerHTML   = '<li class="muted">Login to see your skills.</li>';      $('projects-list').innerHTML = '<li class="muted">Login to see your projects.</li>';      $('stat-skills').textContent = '0';      $('stat-projects').textContent = '0';      $('stat-completed').textContent = '0';      const sug = $('suggestions-list');      if (sug) sug.innerHTML = '<li class="muted">Login to see suggestions.</li>';    }    /* ---------- auth actions ---------- */   async function login(){  const u = $('login-username')?.value.trim();  const p = $('login-password')?.value.trim();  const s = $('login-status');  if(!u || !p){    setStatus(s,'Enter username and password','err');    return;  }  setStatus(s,'Logging inâ€¦');  try{    const res = await fetch(api.login, {      method:'POST',      headers:{'Content-Type':'application/json'},      body: JSON.stringify({ username:u, password:p })    });    // Try JSON first    let data = null;    try {      data = await res.clone().json();    } catch {      // If not JSON, try text      try {        const text = await res.text();        data = { message: text };      } catch {        data = null;      }    }    if (!res.ok) {      console.error('Login failed:', res.status, data);      const serverMsg =        (data && (data.error || data.message)) ||        `HTTP ${res.status}`;      setStatus(s, `Login failed: ${serverMsg}`, 'err');      return;    }    console.log('Login success:', data);    const userId   = (data && (data.userId ?? data.id)) ?? 1;    const username = (data && data.username) || u;    setUser({ userId, username });    setStatus(s,'Success!','ok');    $('login-username').value = '';    $('login-password').value = '';    showApp(getUser());  } catch(e){    console.error('Login error (network?):', e);    setStatus(s,'Network error','err');  }}    async function signup(){  const u = $('signup-username')?.value.trim();  const e = $('signup-email')?.value.trim();  const p = $('signup-password')?.value.trim();  const s = $('signup-status');  if(!u || !p){    setStatus(s,'Username and password required','err');    return;  }  setStatus(s,'Creating accountâ€¦');  try{    const res = await fetch(api.signup, {      method:'POST',      headers:{'Content-Type':'application/json'},      body: JSON.stringify({ username:u, email:e, password:p })    });    let data = null;    try {      data = await res.clone().json();    } catch {      try {        const text = await res.text();        data = { message: text };      } catch {        data = null;      }    }    if (!res.ok) {      console.error('Signup failed:', res.status, data);      const serverMsg =        (data && (data.error || data.message)) ||        `HTTP ${res.status}`;      setStatus(s, `Sign up failed: ${serverMsg}`, 'err');      return;    }    console.log('Signup success:', data);    const userId   = (data && (data.userId ?? data.id)) ?? 1;    const username = (data && data.username) || u;    setUser({ userId, username });    setStatus(s,'Account created!','ok');    $('signup-username').value = '';    $('signup-email').value = '';    $('signup-password').value = '';    showApp(getUser());  } catch(err){    console.error('Signup error (network?):', err);    setStatus(s,'Network error','err');  }}    function logout(){      clearUser();      hideMenu();      showAuth();    }async function readBody(res) {  // Try JSON first, then fallback to text (so we can see Spring error messages)  try {    return await res.clone().json();  } catch {    try {      const t = await res.text();      return { message: t };    } catch {      return null;    }  }}    /* ---------- skills ---------- */    async function addSkill(){      const user = getUser(); const s = $('skill-status');      if(!user){ setStatus(s,'Please login first.','err'); return; }      const name  = $('skill-name')?.value.trim();      const level = $('skill-level')?.value;      const notes = $('skill-notes')?.value.trim();      if(!name){ setStatus(s,'Skill name is required.','err'); return; }      setStatus(s,'Savingâ€¦');      try{        const res = await fetch(api.skills, {          method:'POST', headers:{'Content-Type':'application/json'},          body: JSON.stringify({ userId:user.userId, name, level, notes })        });        const data = await safeJson(res);        if(!res.ok){          setStatus(s,(data && (data.error || data.message)) || 'Failed to save.','err');          return;        }        setStatus(s,'Saved!','ok');        $('skill-name').value=''; $('skill-level').value=''; $('skill-notes').value='';        await loadSkills();        refreshDashboard();        loadSuggestions();      }catch(e){        console.error('Add skill error', e);        setStatus(s,'Network error','err');      }    }    async function loadSkills(){      const user = getUser();      const list = $('skills-list');      if(!user){        list.innerHTML = '<li class="muted">Login to see your skills.</li>';        return [];      }      list.innerHTML = '<li class="muted">Loadingâ€¦</li>';      try{        const res = await fetch(`${api.skills}?userId=${user.userId}`);        const data = await safeJson(res) || [];        if(!res.ok){          list.innerHTML = '<li class="muted">Failed to load skills.</li>';          return [];        }        if(!data.length){          list.innerHTML = '<li class="muted">No skills yet. Add one!</li>';          return [];        }        list.innerHTML = '';        data.forEach(sObj => {          const li = document.createElement('li');          li.dataset.skillId = sObj.id;          const name = sObj.name || sObj.skillName || '(unnamed)';          const level = sObj.level || sObj.skillLevel || '';          const when = sObj.createdAt ? new Date(sObj.createdAt).toLocaleString() : '';          li.innerHTML = `            <strong>${name}</strong>${level ? ' (' + level + ')' : ''}${when ? ' â€” <span class="muted">' + when + '</span>' : ''}            <br/>            <button type="button" class="btn ghost" style="margin-top:6px;padding:6px 10px;font-size:.85rem"              onclick="openSkillDetail(${sObj.id})">              View / Edit &amp; AI Help            </button>          `;          list.appendChild(li);        });        return data;      }catch(e){        console.error('Load skills error', e);        list.innerHTML = '<li class="muted">Network error.</li>';        return [];      }    }    /* ---------- projects ---------- */    async function addProject(){      const user = getUser(); const s = $('proj-status-msg');      if(!user){ setStatus(s,'Please login first.','err'); return; }      const title = $('proj-title')?.value.trim();      const description = $('proj-desc')?.value.trim();      const techStack = $('proj-tech')?.value.trim();      const statusVal = $('proj-status')?.value;      if(!title){ setStatus(s,'Project title is required.','err'); return; }      setStatus(s,'Savingâ€¦');      try{        const res = await fetch(api.projects, {          method:'POST', headers:{'Content-Type':'application/json'},          body: JSON.stringify({ userId:user.userId, title, description, techStack, status: statusVal })        });        const data = await safeJson(res);        if(!res.ok){          setStatus(s,(data && (data.error || data.message)) || 'Failed to save project.','err');          return;        }        setStatus(s,'Saved!','ok');        $('proj-title').value=''; $('proj-desc').value=''; $('proj-tech').value=''; $('proj-status').value='In Progress';        await loadProjects();        refreshDashboard();        loadSuggestions();      }catch(e){        console.error('Add project error', e);        setStatus(s,'Network error.','err');      }    }    async function loadProjects(){      const user = getUser();      const list = $('projects-list');      if(!user){        list.innerHTML = '<li class="muted">Login to see your projects.</li>';        return [];      }      list.innerHTML = '<li class="muted">Loadingâ€¦</li>';      try{        const res = await fetch(`${api.projects}?userId=${user.userId}`);        const data = await safeJson(res) || [];        if(!res.ok){          list.innerHTML = '<li class="muted">Failed to load projects.</li>';          return [];        }        if(!data.length){          list.innerHTML = '<li class="muted">No projects yet. Add one!</li>';          return [];        }        list.innerHTML = '';        data.forEach(p=>{          const li = document.createElement('li');          const when = p.createdAt ? new Date(p.createdAt).toLocaleString() : '';          li.textContent = `${p.title} â€” ${p.status}${p.techStack?' ['+p.techStack+']':''}${when?' â€” '+when:''}`;          list.appendChild(li);        });        return data;      }catch(e){        console.error('Load projects error', e);        list.innerHTML = '<li class="muted">Network error.</li>';        return [];      }    }    async function loadSuggestions(){      const user = getUser();      const list = $('suggestions-list');      if(!list) return;      if(!user){        list.innerHTML = '<li class="muted">Login to see suggestions.</li>';        return;      }      list.innerHTML = '<li class="muted">Thinkingâ€¦</li>';      try{        const res = await fetch(`${api.suggestions}?userId=${user.userId}`);        const data = await safeJson(res) || [];        if(!res.ok){          list.innerHTML = '<li class="muted">Failed to load suggestions.</li>';          return;        }        if(!Array.isArray(data) || !data.length){          list.innerHTML = '<li class="muted">No suggestions right now.</li>';          return;        }        list.innerHTML = '';        data.forEach(s=>{          const li = document.createElement('li');          const kind = (s.type||'TIP').toUpperCase();          li.innerHTML = `<strong>[${kind}] ${s.title}</strong>${            s.reason?`<br><span class="muted">${s.reason}</span>`:''          }${            s.link?`<br><a href="${s.link}" target="_blank" rel="noreferrer">Resource</a>`:''          }`;          list.appendChild(li);        });      }catch(e){        console.error('Load suggestions error', e);        list.innerHTML = '<li class="muted">Network error.</li>';      }    }    /* ---------- dashboard ---------- */    async function refreshDashboard(){      const [skills, projects] = await Promise.all([loadSkills(), loadProjects()]);      $('stat-skills').textContent = skills.length;      $('stat-projects').textContent = projects.length;      $('stat-completed').textContent = projects.filter(p => (p.status||'').toLowerCase()==='completed').length;      renderSkillsChart(skills);    }    let skillsChart = null;    function renderSkillsChart(skills) {      const canvas = $('skills-chart');      if (!canvas || typeof Chart === 'undefined') return;      const counts = { Beginner: 0, Intermediate: 0, Advanced: 0, Unknown: 0 };      skills.forEach(s => {        const lvl = (s.level || s.skillLevel || '').toLowerCase();        if (lvl === 'beginner') counts.Beginner++;        else if (lvl === 'intermediate') counts.Intermediate++;        else if (lvl === 'advanced') counts.Advanced++;        else counts.Unknown++;      });      const labels = Object.keys(counts);      const data = Object.values(counts);      const config = {        type: 'bar',        data: {          labels,          datasets: [{            label: 'Skills by level',            data          }]        },        options: {          responsive: true,          plugins: {            legend: { display: false }          },          scales: {            x: { grid: { display: false } },            y: { beginAtZero: true, ticks: { stepSize: 1 } }          }        }      };      if (skillsChart) {        skillsChart.data = config.data;        skillsChart.update();      } else {        skillsChart = new Chart(canvas.getContext('2d'), config);      }    }    /* ---------- chip menu ---------- */    function toggleMenu(){      $('chip-menu').classList.toggle('hide');    }    function hideMenu(){ $('chip-menu').classList.add('hide'); }    /* ---------- boot ---------- */    document.addEventListener('DOMContentLoaded', () => {      // wire auth      $('btn-login')?.addEventListener('click', login);      $('btn-signup')?.addEventListener('click', signup);      // wire tabs      $('tab-dashboard')?.addEventListener('click', ()=> activateTab('tab-dashboard'));      $('tab-skills')?.addEventListener('click', ()=> { activateTab('tab-skills'); loadSkills(); });      $('tab-projects')?.addEventListener('click', ()=> { activateTab('tab-projects'); loadProjects(); });      // quick actions      $('qa-add-skill')?.addEventListener('click', ()=> { activateTab('tab-skills'); });      $('qa-add-project')?.addEventListener('click', ()=> { activateTab('tab-projects'); });      // skills/projects actions      $('btn-add-skill')?.addEventListener('click', addSkill);      $('btn-add-project')?.addEventListener('click', addProject);      // chip + menu      $('user-chip')?.addEventListener('click', toggleMenu);      $('btn-goto-dashboard')?.addEventListener('click', ()=>{ hideMenu(); activateTab('tab-dashboard'); });      $('btn-goto-skills')?.addEventListener('click', ()=>{ hideMenu(); activateTab('tab-skills'); loadSkills(); });      $('btn-goto-projects')?.addEventListener('click', ()=>{ hideMenu(); activateTab('tab-projects'); loadProjects(); });      $('btn-logout')?.addEventListener('click', logout);      document.addEventListener('click', (e)=> {        const chip = $('user-chip'); const menu = $('chip-menu');        if(!chip || !menu) return;        if (!chip.contains(e.target)) hideMenu();      });      // always start on auth screen, not logged in      clearUser();      showAuth();    });</script><!-- Skill Detail Modal --><div id="skill-modal" class="hide"     style="position:fixed;inset:0;background:rgba(15,23,42,.85);align-items:center;justify-content:center;z-index:50;display:none;">    <div class="card" style="max-width:640px;width:100%;max-height:90vh;overflow:auto;position:relative">        <button type="button"                onclick="closeSkillModal()"                style="position:absolute;top:10px;right:12px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;font-size:1.1rem">            âœ•        </button>        <h2 id="skill-modal-title">Skill Detail</h2>        <label>Skill Name            <input id="modal-skill-name" readonly />        </label>        <label>Level            <select id="modal-skill-level">                <option value="">(optional)</option>                <option>Beginner</option>                <option>Intermediate</option>                <option>Advanced</option>            </select>        </label>        <label>Notes            <textarea id="modal-skill-notes" rows="3"></textarea>        </label>        <div class="btn-row">            <button class="btn" type="button" onclick="saveSkillDetail()">Save</button>            <button class="btn ghost" type="button" onclick="getSkillAiSuggestions()">Get AI Suggestions</button>        </div>        <div id="skill-modal-status" class="status muted"></div>        <hr style="margin:16px 0;border-color:var(--border)">        <h3>Suggestions</h3>        <pre id="skill-modal-suggestions" class="muted" style="white-space:pre-wrap;"></pre>        <hr style="margin:16px 0;border-color:var(--border)">        <h3>Ask AI About This Skill</h3>        <textarea id="skill-modal-chat-input" rows="3"                  placeholder="Ask a question about how to improve this skill..."></textarea>        <div class="btn-row">            <button class="btn" type="button" onclick="chatAboutSkill()">Ask</button>        </div>        <div id="skill-modal-chat-reply" class="status muted" style="margin-top:8px"></div>    </div></div></body></html>